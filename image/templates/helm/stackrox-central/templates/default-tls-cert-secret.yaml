{{- include "stackrox.init" . -}}

{{ if ._rox.central.defaultTlsCert }}
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: central-default-tls-cert
  namespace: {{.Release.Namespace}}
  labels:
    {{ template "defaultLabels" . }}
  annotations:
    {{ template "defaultAnnotations" . }}
    "helm.sh/hook": "pre-install"
stringData:
  tls.crt: {{ ._rox.central.defaultTlsCert.cert | quote }}
  tls.key: {{ ._rox.central.defaultTlsCert.key | quote }}
{{end}}
