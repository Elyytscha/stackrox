tests:
- name: "All clusters should have secret created"
  expect: |
    .secrets["helm-cluster-config"].stringData["config.yaml"] | assertThat(. and . != "")
    envVars(.deployments.sensor; "sensor")["ROX_HELM_CLUSTER_CONFIG_FP"] | assertThat(. and . != "")
  tests:
  - name: "with default (null) setting"
  - name: "with explicit true setting"
    set:
      helmManaged: true
  - name: "with false setting"
    set:
      helmManaged: false
