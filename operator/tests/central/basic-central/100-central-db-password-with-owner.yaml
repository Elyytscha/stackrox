# Test that the operator removes the ownerReference from the central-db-password secret.
# The ownerReference was added in previous versions.
#
# Reason: The deletion of the Central CR will delete the password using garbage collection.
# This is undesirable because, upon Central CR deletion, the operator will NOT delete the
# central-db PVC. So if Central is reinstalled, the operator will reuse the existing PVC,
# but the password that created that DB would be lost.
#
apiVersion: v1
kind: Secret
metadata:
  name: central-db-password
  ownerReferences:
    - apiVersion: "platform.stackrox.io/v1alpha1"
      kind: Central
      name: stackrox-central-services
      uid: "1234"
